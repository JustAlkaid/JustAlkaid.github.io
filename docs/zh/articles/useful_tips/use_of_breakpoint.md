# 断点调试

## 使用IDE的调试工具进行调试

看到这里，相信你已经知道了怎么使用 printf 进行调试，但是使用 printf 调试需要反复地将 printf 粘贴到不同的地方，而且一段代码只能检验部分变量的值，是不是很麻烦？那么，有没有一种工具，可以实时检测到所有变量的数值变化呢？

当然有！所有 IDE 都会有调试工具，调试器的最基本功能就是将一个飞速，运行的程序中断下来，并且使其按照用户的意愿执行。调试器是靠迫使目标程序触发一个精心构造的异常来完成这些工作的。也就是说，借用调试器的功能，你将以很高的效率观察所有变量在某行代码的变化。下面以 VSCode 为例，讲解调试器的使用方法。

### 设置断点
在代码行号的左侧点击空白处，设置断点。你会看到一个红色的圆点，表示已设置断点。你可以在多个位置设置多个断点，调试器会在执行到这些断点时暂停。

### 启动调试
在 Run 面板中选择你想要的调试配置。点击绿色的 Start Debugging 按钮（或者按 F5 键），启动调试会话。代码执行会在断点处暂停，你可以查看变量、堆栈、内存等信息。

### 调试控制台
调试会话启动后，你会看到 VSCode 的调试控制台，显示程序的输出、错误信息和其他调试信息。你可以在控制台中输入命令，查看变量的当前值，甚至修改它们。

#### 常用调试操作：
继续执行 (F5 或点击 "Continue" 按钮)：程序从当前断点继续执行，直到下一个断点。
单步执行 (F10)：执行当前行代码，但不进入函数内部。
单步进入 (F11): 执行当前行代码，并进入函数内部。
单步跳出 (Shift + F11): 跳出当前函数。
停止调试 (Shift + F5): 停止调试会话。

### 查看变量、调用栈和监视
变量：在调试过程中，左侧的 "Variables" 面板会显示当前作用域内的所有变量。你可以查看它们的值。  
另一种更简单的办法是直接在你的代码中找到你想要观察的变量，随后把鼠标悬停在它上方，稍作等待，就会出现一个悬停窗口展示变量的值。这种办法还可以用来查看其他函数中尚存在的变量和全局变量的值。应当注意，只有跟踪在生命周期内的变量才有意义。如果你尝试读取一个未被定义或者已经被销毁的变量的值，即使是读到了，也是没有意义的。  

调用栈：在 "Call Stack" 面板中，查看当前被调函数的栈帧，这可以帮助你追踪程序的执行路径。  
请注意，在函数递归执行时，每次调用函数都会产生新的栈帧，这可能导致非常夸张的显示内容。  

监视：可以在 "Watch" 面板中手动添加变量或表达式，实时监控它们的值变化。

那么，printf 和断点哪个好用呢？答案当然是都有作用。
断点调试更适用于复杂的逻辑问题、难以复现的错误。需要查看函数调用栈、观察变量变化等细节的场景或需要在不修改代码的情况下调试的情况，而　printf　调试更多用于快速检查简单的程序问题或特定的变量值以及简单脚本、快速验证代码块等场景。需要注意的一点是，由于断点调试与 IDE 中的文件有关，所以断点调试有概率（这个概率很小，但不是没有）出错，导致程序设计过程中受到错误引导，此时需要冷静辨析，必要时可以用　printf　验证调试的正确。